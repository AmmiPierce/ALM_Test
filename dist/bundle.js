(()=>{"use strict";function e(e=null){let t=document.createElement("div"),n=document.createElement("textarea");t.classList.add("sticker"),e&&(n.value=e.value,n.style.cssText=`width:${e.width}px;height:${e.height}px`,t.style.cssText=`left:${e.posX}px;top:${e.posY}px`),t.append(n),document.querySelector(".desk").append(t)}let t=document.getElementById("addButton"),n=document.getElementById("saveButton"),l=document.getElementById("desk");t.addEventListener("click",(()=>e())),n.addEventListener("click",(function(){let e=document.querySelectorAll(".sticker"),t={};e.forEach(((e,n)=>{let l=e.querySelector("textarea");t[`sticker${n}`]={value:l.value,width:l.offsetWidth,height:l.offsetHeight,posX:e.getBoundingClientRect().left,posY:e.getBoundingClientRect().top}})),localStorage.setItem("stickers",JSON.stringify(t))})),l.addEventListener("mousedown",(function(e){let t=e.target.closest(".sticker");if(!t||e.target.closest(".sticker textarea"))return;let n=document.getElementById("desk"),l=document.getElementById("deleteArea"),s=e.clientX-t.getBoundingClientRect().left,o=e.clientY-t.getBoundingClientRect().top;l.style.display="flex";let d=l.getBoundingClientRect().left,i=l.getBoundingClientRect().top,c=(e,n)=>{t.style.left=e-s+"px",t.style.top=n-o+"px"},a=e=>{c(e.pageX,e.pageY)},r=e=>{e.pageX>=d&&e.pageY>=i&&t.remove(),l.style.display="",t.style.zIndex="",document.removeEventListener("mousemove",a),n.removeEventListener("mouseup",r)};t.style.zIndex=100,c(e.pageX,e.pageY),document.addEventListener("mousemove",a),n.addEventListener("mouseup",r)})),l.addEventListener("dragstart",(()=>!1)),function(){let t=localStorage.getItem("stickers");if(t)for(let n of Object.values(JSON.parse(t)))e(n)}()})();